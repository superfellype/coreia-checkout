/* Coreia Checkout Selector v1 */
(function(){if(window.__coreiaInlineInjected_v1)return;window.__coreiaInlineInjected_v1=true;var SKEY="coreia_hora_obrigatoria",PID="coreia-inline-selector",ERR="coreia-inline-erro",STEP=30,MIN_DELAY=90,MARGIN=15,LAF={hh:10,mm:30},LAT={hh:15,mm:0},LSF={hh:11,mm:30},LST={hh:14,mm:30},NAF={hh:17,mm:0},NAT={hh:23,mm:0},NSF={hh:17,mm:0},NST={hh:23,mm:0};function p(n){return n<10?"0"+n:""+n}function tAt(h,m){var d=new Date();d.setHours(h,m,0,0);return d}function addM(d,m){return new Date(d.getTime()+m*60000)}function timeStr(d){return p(d.getHours())+":"+p(d.getMinutes())}function inW(now,f,t){return now>=tAt(f.hh,f.mm)&&now<=tAt(t.hh,t.mm)}function gen(s,e){for(var a=[],cur=tAt(s.hh,s.mm),end=tAt(e.hh,e.mm);cur.getTime()<=end.getTime();cur=addM(cur,STEP)){a.push(new Date(cur.getTime()));}return a}function avail(){var now=new Date(),min=addM(now,MIN_DELAY),arr=[],inLunch=inW(now,LAF,LAT),inNight=inW(now,NAF,NAT);if(inLunch)arr=arr.concat(gen(LSF,LST));if(inNight)arr=arr.concat(gen(NSF,NST));var end=tAt(23,59);var filt=arr.filter(function(d){if(d.getTime()>end.getTime())return!1;if(d.getTime()>=min.getTime())return!0;var diff=Math.ceil((min.getTime()-d.getTime())/60000);return diff<=MARGIN});filt.sort(function(a,b){return a-b});var u=[],l=null;return filt.forEach(function(d){var s=timeStr(d);if(s!==l){u.push(s);l=s}}),u}function findNote(){var q=document.querySelector("#order-note")||document.querySelector("textarea[name='order-note']")||document.querySelector("textarea[placeholder*='observa']");return q||(function(){for(var L=document.querySelectorAll("label,div,span,p"),i=0;i<L.length;i++){var t=(L[i].innerText||"").toLowerCase();if(!t)continue;if(t.indexOf("observa")!==-1){var p=L[i].closest("fieldset,.form-group,.order-note,.box-content")||L[i].parentElement;if(p){var ta=p.querySelector("textarea,input");if(ta)return ta;}}}return null})()}function safeInsertAfter(el,html){try{var w=document.createElement("div");w.innerHTML=html;var n=w.firstElementChild;if(el&&el.parentNode){el.parentNode.insertBefore(n,el.nextSibling);return n;}if(document.body){document.body.appendChild(n);return n;}if(document.documentElement){document.documentElement.appendChild(n);return n;}return null;}catch(e){return null}}function render(target){var old=document.getElementById(PID);if(old)old.remove();var slots=avail(),html="<div id='"+PID+"' style='margin:14px 0;max-width:420px'><div style='font-weight:700;margin-bottom:6px;color:#7a1a1a'>Escolha o horário de entrega *</div>";if(!slots.length){html+="<div style='font-size:14px;color:#444;margin-bottom:6px'>Nenhum horário disponível hoje. Tente novamente mais tarde.</div><div id='"+ERR+"' style='color:#d00;font-size:12px;display:none;'>Selecione um horário para continuar.</div></div>";safeInsertAfter(target,html);return;}html+="<div id='coreia-inline-btns' style='display:flex;flex-wrap:wrap;gap:8px;margin-bottom:6px'>";for(var i=0;i<slots.length;i++){var s=slots[i];html+="<button type='button' data-coreia-slot='"+s+"' style='padding:6px 10px;border-radius:8px;border:1px solid #7a1a1a;background:#7a1a1a;color:#fff;cursor:pointer;font-size:13px;font-weight:600'>"+s+"</button>";}html+="</div><div id='"+ERR+"' style='color:#d00;font-size:12px;display:none;'>Selecione um horário para continuar.</div></div>";var node=safeInsertAfter(target,html);if(node){var btns=node.querySelectorAll("button[data-coreia-slot]");for(var j=0;j<btns.length;j++){btns[j].addEventListener("click",function(){for(var k=0;k<btns.length;k++){btns[k].style.opacity="0.45";btns[k].style.transform="none";}this.style.opacity="1";this.style.transform="scale(1.04)";var choice=this.getAttribute("data-coreia-slot");localStorage.setItem(SKEY,choice);var note=findNote();if(note){if("value" in note)note.value="Entregar às "+choice;else note.innerText="Entregar às "+choice;note.dispatchEvent(new Event("input",{bubbles:!0}));}});}var chosen=localStorage.getItem(SKEY);if(chosen)for(var j=0;j<btns.length;j++){if(btns[j].getAttribute("data-coreia-slot")===chosen){btns[j].style.opacity="1";btns[j].style.transform="scale(1.04)";}else btns[j].style.opacity="0.45";}}}function attachBlock(){var sels=[".btn-finalize","button[data-testid='buy-now-pix']",".btn.btn-primary.btn-block.btn-send.btn-finalize","button[type='submit']"],btn=null;for(var i=0;i<sels.length;i++){try{btn=document.querySelector(sels[i]);if(btn)break;}catch(e){}}if(!btn){var c=Array.from(document.querySelectorAll("button,a"));for(var j=0;j<c.length;j++){var t=(c[j].innerText||"").trim().toLowerCase();if(t && (t.indexOf("finalizar")!==-1||t.indexOf("prosseguir")!==-1||t.indexOf("continuar")!==-1||t.indexOf("confirmar")!==-1)){btn=c[j];break;}}}if(!btn)return; if(btn.__coreia_block_attached)return;btn.__coreia_block_attached=!0;btn.addEventListener("click",function(e){if(!localStorage.getItem(SKEY)){e.preventDefault();var er=document.getElementById(ERR);if(er)er.style.display="block";var sel=document.getElementById(PID);if(sel){sel.scrollIntoView({behavior:"smooth",block:"center"});sel.style.transition="transform .12s";sel.style.transform="translateY(-4px)";setTimeout(function(){try{sel.style.transform="none"}catch(e){}},120);} }},!0);}function waitFor(list,timeout){timeout=timeout||1e4;var end=now()+timeout;return new Promise(function(resolve){(function poll(){for(var i=0;i<list.length;i++){try{if(document.querySelector(list[i]))return resolve(document.querySelector(list[i]));}catch(e){} }if(Date.now()>end)return resolve(null);setTimeout(poll,300);} )();});}function now(){return Date.now()}(async function(){var target=findNote();if(!target)target=await wait(["#order-note","textarea[placeholder*='observa']",".col-checkout.col-3 .box-checkout.box-resume",".box-resume .box-content",".cart-resume"],1e4);if(!target)return;render(target);attachBlock();try{var mo=new MutationObserver(function(){if(!document.getElementById(PID))render(target);attachBlock();});mo.observe(document.body,{childList:!0,subtree:!0});setTimeout(function(){try{mo.disconnect()}catch(e){}},25e3);}catch(e){} })();
